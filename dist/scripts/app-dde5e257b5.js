!function(){"use strict";angular.module("sf_blog.main",[]).config(["$stateProvider",function(t){t.state("home",{url:"/",templateUrl:"app/components/main/main.html",controller:"MainController",controllerAs:"main",title:"Simplefatty|首页",description:"Simplefatty的个人博客"})}])}(),function(){angular.module("sf_blog.main").directive("loadMore",["$timeout","$window","EVENT",function(t,n,e){return{restrict:"AE",link:function(o,r,a){angular.element(n).on("scroll",function(){var r=parseInt(document.body.scrollTop),a=parseInt(document.body.clientHeight);r>=a-n.screen.height+50&&t(function(){o.$emit(e.NeedToLoad)},200,!0)})}}}])}(),function(){"use strict";angular.module("sf_blog.main").filter("dataFilter",function(){return function(t,n){var e=new Date(t),o=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return r=r>9?r:"0"+r,a=a>9?a:"0"+a,o+"."+r+"."+a}}).controller("MainController",["$scope","$timeout","Blog","Tags","EVENT",function(t,n,e,o,r){function a(o,r){t.isLoading=!0,e.getFrontBlogCount(o).then(function(n){t.blogCount=n.count,t.numPages=Math.ceil(t.blogCount/t.options.itemsPerPage)}),e.getFrontBlogList(o).then(function(e){for(var o in e.data){l=[];for(var a in e.data[o].tags)l.push(i[e.data[o].tags[a]]);c?e.data[o].image=e.data[o].images[0]:e.data[o].image=e.data[o].images[1],e.data[o].tagName=l.join(",")}n(function(){r?t.blogList=e.data:t.blogList=t.blogList.concat(e.data),t.isLoading=!1},100,!0)})["catch"](function(){t.isLoading=!1,t.blogList=[]})}var i={},l=[],c=function(){for(var t=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),e=!0,o=0;o<n.length;o++)if(t.indexOf(n[o])>0){e=!1;break}return e}();t.isLoading=!0,o.getFrontTagList().then(function(n){t.tagList=n.data;for(var e in n.data)i[n.data[e]._id]=n.data[e].name;a(t.options)}),t.blogList=[],t.options={currentPage:1,itemsPerPage:3,sortName:"publish_time",tagId:""},t.changeTag=function(n){t.options.currentPage=1,t.options.tagId=n,t.options.sortName="",a(t.options,!0)},t.$on(r.NeedToLoad,function(){t.options.currentPage*t.options.itemsPerPage<t.blogCount&&(t.isLoading=!0,t.options.currentPage++,a(t.options))})}])}(),function(){"use strict";function t(t,n,e,o,r,a){o.html5Mode(!0),r.defaults.timeout=5e5,r.defaults.withCredentials=!0,r.interceptors.push("AuthInterceptor"),t.debugEnabled(a),o.hashPrefix("!"),e.otherwise("/")}function n(t,n,e,o,r,a){function i(t){var n=t.description;return n?n:e.actical.description}function l(t){var n=t.title;return n?n:e.actical.title}e.$on("$stateChangeSuccess",function(t,n){n&&(n.$$route||n).redirectTo||(e.seo={description:i(n),title:l(n)})})}angular.module("sf_blog",["ui.router","ngTouch","ngSanitize","sf_blog.main","sf_blog.article","sf_blog.resources","sf_blog.directive","sf_blog.service"]).config(t).run(n),t.$inject=["$logProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","IsDebug"],n.$inject=["$window","$document","$rootScope","$location","$injector","$timeout"]}(),function(){angular.module("sf_blog").directive("scrollHidden",["$timeout","$window","$document",function(t,n,e){return{restrict:"AE",link:function(e,o,r){var a,i,l=document.body.scrollTop,c=null;e.state=!0,angular.element(n).on("scroll",function(){c&&t.cancel(c),a=document.body.scrollTop,a>100?(i=a-l,0>i?c=t(function(){e.state=!0},200,!0):i>0&&(c=t(function(){e.state=!1},200,!0))):c=t(function(){e.state=!0},200,!0),l=angular.copy(a)})}}}])}(),function(){"use strict";angular.module("sf_blog").component("sfNavbar",{templateUrl:"app/components/navbar/navbar.html"})}(),function(){"use strict";angular.module("sf_blog").component("sfLoading",{templateUrl:"app/components/loading/loading.html"})}(),function(){"use strict";angular.module("sf_blog").component("sfFooter",{templateUrl:"app/components/footer/footer.html",controller:"footerCtrl",controllerAs:"footer"}).controller("footerCtrl",["$rootScope","$window",function(t,n){this.info="Simplefatty © 2015-2016 ",t.$on("$stateChangeSuccess",function(){n.scrollTo(0,0)})}])}(),function(){"use strict";angular.module("sf_blog").component("sfBanner",{templateUrl:"app/components/banner/banner.html",controller:"bannerCtrl",controllerAs:"banner"}).controller("bannerCtrl",["$scope",function(){this.tags=["Front-End Developer","Designer","Programmer","Gamer","JavaScript Developer","HTML Developer","Web Programmer"]}]).directive("tagContent",["$timeout",function(t){return{template:'<span ng-bind="tagName"></span>',scope:{tags:"="},replace:!0,link:function(n,e,o,r){function a(){i()}function i(){n.tagName=n.tagName.slice(0,-1),n.tagName.length?t(i,50,!0):t(function(){l(c())},100,!0)}function l(e){n.tagName=e.substring(0,n.tagName.length+1),n.tagName.length!=e.length?t(function(){l(e)},100,!0):t(a,5e3,!0)}function c(){return n.tags[Math.floor(Math.random()*n.tags.length)]}n.tagName=n.tags[0],t(i,1e3,!0)}}}])}(),function(){"use strict";angular.module("sf_blog.article",[]).config(["$stateProvider",function(t){t.state("article",{url:"/article/:aid",templateUrl:"app/components/article/article.html",controller:"ArticleCtrl",controllerAs:"artical",resolve:{actical:["$stateParams","$rootScope","Blog",function(t,n,e){return e.getFrontArticle({id:t.aid}).then(function(t){return n.actical={title:t.data.title,description:t.data.introduce},t.data})}]}})}])}(),function(){"use strict";angular.module("sf_blog.article").directive("comment",function(){return{restrict:"AE",template:'<div class="ds-thread" ng-transclude></div>',transclude:!0,scope:{article:"=article",title:"=",url:"="},link:function(t,n){var e=t.article,o=t.url,r=t.url,a=t.title,i=document.createElement("div");i.setAttribute("data-thread-key",e),i.setAttribute("data-url",o),i.setAttribute("data-title",a),i.setAttribute("data-author-key",r),DUOSHUO.EmbedThread(i),n.append(i)}}})}(),function(){"use strict";angular.module("sf_blog.article").controller("ArticleCtrl",["$rootScope","$scope","$state","Blog","actical","$stateParams","$location","$timeout",function(t,n,e,o,r,a,i,l){var c=this;c.common={aid:a.aid,url:i.$$absUrl},c.common.aid||e.go("home"),o.getFrontArticle({id:c.common.aid}).then(function(t){c.article=r}).then(function(){var t={id:c.common.aid,sortName:"publish_time",tagId:""};o.getPrenext(t).then(function(t){c.next=t.data.next||{},c.prev=t.data.prev||{}})})["catch"](function(){e.go("home")})}])}(),function(){"use strict";angular.module("sf_blog.service",["ngAnimate"])}(),function(){"use strict";angular.module("sf_blog.service").factory("AuthInterceptor",["$rootScope","$q","$location","$injector",function(t,n,e,o){return{}}])}(),function(){"use strict";angular.module("sf_blog.resources",["ngResource"])}(),function(){"use strict";angular.module("sf_blog.resources").factory("User",["$resource","ServerUrl",function(t,n){var e=t(n+"/users/:id/:controller",{id:"@_id"},{getCaptcha:{method:"GET",params:{id:"getCaptcha"}},get:{method:"GET",params:{id:"me"}},mdUser:{method:"PUT",params:{id:"mdUser"}},getUserProvider:{method:"GET",params:{id:"getUserProvider"}},snsLogins:{method:"GET",params:{id:"snsLogins"}}});return{get:e.get,getCaptcha:function(t){var n=t||angular.noop;return e.getCaptcha(function(t){return n(t)},function(t){return n(t)}).$promise},mdUser:function(t,n){var o=n||angular.noop;return e.mdUser(t,function(t){return o(t)},function(t){return o(t)}).$promise},getUserProvider:function(t){var n=t||angular.noop;return e.getUserProvider(function(t){return n(t)},function(t){return n(t)}).$promise},getLogins:function(t){var n=t||angular.noop;return e.snsLogins(function(t){return n(t)},function(t){return n(t)}).$promise}}}])}(),function(){"use strict";angular.module("sf_blog.resources").factory("Tags",["$resource","ServerUrl",function(t,n){var e=t(n+"/tags/:id/:controller",{id:"@_id"},{getFrontTagList:{method:"GET",params:{id:"getFrontTagList"}}});return{getFrontTagList:function(t){var n=t||angular.noop;return e.getFrontTagList(function(t){return n(t)},function(t){return n(t)}).$promise}}}])}(),function(){"use strict";angular.module("sf_blog.resources").factory("Comment",["$resource","ServerUrl",function(t,n){var e=t(n+"/comment/:id/:controller",{id:"@_id"},{getFrontCommentList:{method:"GET",params:{controller:"getFrontCommentList"}},addNewComment:{method:"POST",params:{id:"addNewComment"}},addNewReply:{method:"POST",params:{controller:"addNewReply"}},delReply:{method:"PUT",params:{controller:"delReply"}}});return{addNewComment:function(t,n){var o=n||angular.noop;return e.addNewComment(t,function(t){return o(t)},function(t){return o(t)}).$promise},getFrontCommentList:function(t,n){var o=n||angular.noop;return e.getFrontCommentList(t,function(t){return o(t)},function(t){return o(t)}).$promise},addNewReply:function(t,n,o){var r=o||angular.noop;return e.addNewReply({id:t},n,function(t){return r(t)},function(t){return r(t)}).$promise},delComment:function(t,n){var o=n||angular.noop;return e.remove(t,function(t){return o(t)},function(t){return o(t)}).$promise},delReply:function(t,n,o){var r=o||angular.noop;return e.delReply({id:t},n,function(t){return r(t)},function(t){return r(t)}).$promise}}}])}(),function(){"use strict";angular.module("sf_blog.resources").factory("Blog",["$resource","ServerUrl",function(t,n){var e=t(n+"/article/:id/:controller",{id:"@_id"},{getFrontBlogList:{method:"GET",params:{id:"getFrontArticleList"}},getFrontBlogCount:{method:"GET",params:{id:"getFrontArticleCount"}},getFrontArticle:{method:"GET",params:{controller:"getFrontArticle"}},getIndexImage:{method:"GET",params:{id:"getIndexImage"}},toggleLike:{method:"PUT",params:{controller:"toggleLike"}},getPrenext:{method:"GET",params:{controller:"getPrenext"}}});return{getFrontBlogList:function(t,n){var o=n||angular.noop;return e.getFrontBlogList(t,function(t){return o(t)},function(t){return o(t)}).$promise},getFrontBlogCount:function(t,n){var o=n||angular.noop;return e.getFrontBlogCount(t,function(t){return o(t)},function(t){return o(t)}).$promise},getFrontArticle:function(t,n){var o=n||angular.noop;return e.getFrontArticle(t,function(t){return o(t)},function(t){return o(t)}).$promise},getIndexImage:function(t){var n=t||angular.noop;return e.getIndexImage(function(t){return n(t)},function(t){return n(t)}).$promise},toggleLike:function(t,n){var o=n||angular.noop;return e.toggleLike(t,{},function(t){return o(t)},function(t){return o(t)}).$promise},getPrenext:function(t,n){var o=n||angular.noop;return e.getPrenext(t,function(t){return o(t)},function(t){return o(t)}).$promise}}}])}(),function(){"use strict";angular.module("sf_blog.directive",[])}(),function(){"use strict";angular.module("sf_blog.directive").directive("lazyContainer",[function(){function t(t){var e=t.data("__uid");return e||t.data("__uid",e=""+ ++n),e}var n=0;return{restrict:"EA",controller:["$scope","$element",function(n,e){function o(){var n=angular.element(this),e=t(n);n.css("opacity",1),i.hasOwnProperty(e)&&delete i[e]}function r(t){var n,o,r=e[0].getBoundingClientRect(),a=t[0].getBoundingClientRect(),i=50;return a.bottom+i>=r.top&&a.top-i<=r.bottom&&(o=!0),a.right+i>=r.left&&a.left-i<=r.right&&(n=!0),n&&o}function a(){Object.keys(i).forEach(function(t){var n=i[t],e=n.iElement,o=n.iScope;r(e)&&e.attr("src",o.lazySrc)})}var i={};this.addImg=function(n,e,a){e.bind("load",o),n.$watch("lazySrc",function(){var o="1s";if(null!=n.animateSpeed&&(o=n.animateSpeed),r(e))n.animateVisible&&e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity "+o,transition:"opacity "+o}),e.attr("src",n.lazySrc);else{var a=t(e);e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity "+o,transition:"opacity "+o}),i[a]={iElement:e,iScope:n}}}),n.$on("$destroy",function(){e.unbind("load");var n=t(e);i.hasOwnProperty(n)&&delete i[n]})},e.bind("scroll",a),e.bind("resize",a)}]}}]).directive("lazySrc",[function(){return{restrict:"A",require:"^lazyContainer",scope:{lazySrc:"@",animateVisible:"@",animateSpeed:"@"},link:function(t,n,e,o){o.addImg(t,n,e)}}}])}(),function(){"use strict";angular.module("sf_blog").directive("highlight",[function(){return{replace:!1,scope:{ngModel:"="},link:function(t,n,e){t.$watch("ngModel",function(e,o){if(e!==o){n.html(t.ngModel);var r=n[0].querySelectorAll("pre code");angular.forEach(r,function(t){hljs.highlightBlock(t)})}})}}}])}(),function(){return angular.module("sf_blog").constant("ServerUrl","/api").constant("IsDebug",!1).constant("CookieConfig",{domain:"sf_blog"}).constant("EVENT",{NeedToLoad:"need-to-load"})}(),angular.module("sf_blog").run(["$templateCache",function(t){t.put("app/components/article/article.html",'<div class="sf_artical_content clearfix" data-ng-class="{\'loadding\':!artical.article.content}"><div class="loader orbit"><div></div><div></div><div></div><div></div></div><div class="markdown col-sm-offset-2 col-sm-8 slide-top" ng-show="artical.article.content" highlight="" ng-model="artical.article.content"></div><comment class="col-sm-offset-2 col-sm-8" article="artical.common.aid" title="artical.title" url="artical.common.url"></comment></div>'),t.put("app/components/banner/banner.html",'<div class="sf_banner"><h1><span class="logo-tag">&lt;</span><tag-content tags="banner.tags"></tag-content><span class="text-cursor">|</span> <span class="logo-tag">/&gt;</span></h1><h2>Simplefatty</h2></div>'),t.put("app/components/footer/footer.html",'<div class="sf_footer"><span ng-bind="::footer.info"></span><a href="http://www.miibeian.gov.cn/" target="_blank">粤ICP备16009462号</a></div>'),t.put("app/components/loading/loading.html",'<div class="ball"></div><div class="ball"></div><div class="ball"></div>'),t.put("app/components/main/main.html",'<sf-banner class="slide-top"></sf-banner><div class="container sf_container" lazy-container=""><div class="notfound slide-top" ng-if="blogList.length<1&&!isLoading"><p>暂无该标签内的文章哦</p><ul class="clearfix"><li data-ng-repeat="tag in tagList" ng-click="changeTag(tag._id)" data-ng-bind="::tag.name"></li></ul></div><div class="row slide-top" data-ng-repeat="blog in blogList"><div class="col-sm-offset-1 col-sm-10 sf_artical_item"><img lazy-src="{{blog.image}}" class="img-responsive" animate-visible="true" animate-speed="0.5s" alt="{{::blog.title}}"><h1 ui-sref="article({aid:blog._id})">{{::blog.title}}</h1><div class="artical_tag"><ul class="taglist clearfix"><li data-ng-repeat="tag in tagList" ng-click="changeTag(tag._id)" data-ng-bind="::tag.name"></li></ul><div class="tag icon-tag" data-ng-bind="::blog.tagName"></div><div class="time icon-time" data-ng-bind="::blog.publish_time|dataFilter"></div></div><p data-ng-bind="::blog.introduce"></p></div></div><sf-loading class="loading" ng-show="isLoading" load-more=""></sf-loading></div>'),t.put("app/components/navbar/navbar.html",'<div scroll-hidden="" ng-show="state" class="sf_navbar slide-down"><div class="container clearfix"><a href="" class="sf_logo"><img src="../assets/images/user_ic.png" alt=""></a><ul class="sf_nav pull-right"><li ui-sref-active="active"><a ui-sref="home">首页</a></li><li>实验室</li></ul></div></div>')}]);