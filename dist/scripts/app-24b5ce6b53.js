!function(){"use strict";function t(t,n,e,o,a,i){o.html5Mode(!0),t.debugEnabled(i),o.hashPrefix("!"),e.otherwise("/")}function n(t,n,e,o,a,i){function r(t){var n=t.description;return n?n:e.actical.description}function l(t){var n=t.title;return n?n:e.actical.title}e.$on("$stateChangeSuccess",function(t,n){n&&(n.$$route||n).redirectTo||(e.seo={description:r(n),title:l(n)})})}angular.module("sf_blog",["ui.router","ngTouch","ngSanitize","sf_blog.main","sf_blog.article","sf_blog.resources","sf_blog.directive"]).config(t).run(n),t.$inject=["$logProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","IsDebug"],n.$inject=["$window","$document","$rootScope","$location","$injector","$timeout"]}(),function(){function t(t,n){}angular.module("sf_blog").directive("scrollHidden",["$timeout","$window","$document",function(n,e,o){return{restrict:"AE",controller:t,controllerAs:"navbarCtrl",link:function(t,o,a){var i,r,l=document.body.scrollTop,c=null;t.state=!0,angular.element(e).on("scroll",function(){c&&n.cancel(c),i=document.body.scrollTop,i>100?(r=i-l,0>r?c=n(function(){t.state=!0},200,!0):r>0&&(c=n(function(){t.state=!1},200,!0))):c=n(function(){t.state=!0},200,!0),l=angular.copy(i)})}}}]).controller("navbarCtroller",t),t.$inject=["$scope","$state"]}(),function(){"use strict";angular.module("sf_blog").component("sfNavbar",{templateUrl:"app/components/navbar/navbar.html"})}(),function(){"use strict";angular.module("sf_blog.main",[]).config(["$stateProvider",function(t){t.state("home",{url:"/",templateUrl:"app/components/main/main.html",controller:"MainController",controllerAs:"main",title:"Simplefatty | 首页",description:"Simplefatty的个人博客"})}])}(),function(){angular.module("sf_blog.main").directive("loadMore",["$timeout","$window","EVENT",function(t,n,e){return{restrict:"AE",link:function(o,a,i){angular.element(n).on("scroll",function(){var a=parseInt(document.body.scrollTop),i=parseInt(document.body.clientHeight);a>=i-n.screen.height+50&&t(function(){o.$emit(e.NeedToLoad)},200,!0)})}}}])}(),function(){"use strict";function t(){return function(t,n){var e=new Date(t),o=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return a=a>9?a:"0"+a,i=i>9?i:"0"+i,o+"."+a+"."+i}}function n(t,n,e,o,a,i){function r(o,a){t.isLoading=!0,e.getFrontBlogCount(o).then(function(n){t.blogCount=n.count,t.numPages=Math.ceil(t.blogCount/t.options.itemsPerPage)}),e.getFrontBlogList(o).then(function(e){for(var o in e.data){c=[];for(var r in e.data[o].tags)c.push(l[e.data[o].tags[r]]);s?e.data[o].image=e.data[o].images[0]:e.data[o].image=e.data[o].images[1],e.data[o].tagName=c.join(",")}n(function(){a?t.blogList=e.data:t.blogList=t.blogList.concat(e.data),t.isLoading=!1,i.prerenderReady=!0},100,!0)})["catch"](function(){t.isLoading=!1,t.blogList=[]})}var l={},c=[],s=function(){for(var t=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),e=!0,o=0;o<n.length;o++)if(t.indexOf(n[o])>0){e=!1;break}return e}();t.isLoading=!0,o.getFrontTagList().then(function(n){t.tagList=n.data;for(var e in n.data)l[n.data[e]._id]=n.data[e].name;r(t.options)}),t.blogList=[],t.options={currentPage:1,itemsPerPage:3,sortName:"publish_time",tagId:""},t.changeTag=function(n){t.options.currentPage=1,t.options.tagId=n,t.options.sortName="",r(t.options,!0)},t.$on(a.NeedToLoad,function(){t.options.currentPage*t.options.itemsPerPage<t.blogCount&&(t.isLoading=!0,t.options.currentPage++,r(t.options))})}angular.module("sf_blog.main").filter("dataFilter",t).controller("MainController",n),n.$inject=["$scope","$timeout","Blog","Tags","EVENT","$window"]}(),function(){"use strict";angular.module("sf_blog").component("sfLoading",{templateUrl:"app/components/loading/loading.html"})}(),function(){"use strict";angular.module("sf_blog").component("sfFooter",{templateUrl:"app/components/footer/footer.html",controller:"footerCtrl",controllerAs:"footer"}).controller("footerCtrl",["$rootScope","$window",function(t,n){this.info="Simplefatty © 2015-2016 ",t.$on("$stateChangeSuccess",function(){n.scrollTo(0,0)})}])}(),function(){"use strict";angular.module("sf_blog.article",[]).config(["$stateProvider",function(t){t.state("article",{url:"/article/:aid",templateUrl:"app/components/article/article.html",controller:"ArticleCtrl",controllerAs:"artical",resolve:{actical:["$stateParams","$rootScope","Blog",function(t,n,e){return e.getFrontArticle({id:t.aid}).then(function(t){return n.actical={title:t.data.title,description:t.data.introduce},t.data})}]}})}])}(),function(){"use strict";angular.module("sf_blog.article").directive("comment",function(){return{restrict:"AE",template:'<div class="ds-thread" ng-transclude></div>',transclude:!0,scope:{article:"=article",title:"=",url:"="},link:function(t,n){var e=t.article,o=t.url,a=t.url,i=t.title,r=document.createElement("div");r.setAttribute("data-thread-key",e),r.setAttribute("data-url",o),r.setAttribute("data-title",i),r.setAttribute("data-author-key",a),DUOSHUO.EmbedThread(r),n.append(r)}}})}(),function(){"use strict";angular.module("sf_blog").component("sfBanner",{templateUrl:"app/components/banner/banner.html",controller:"bannerCtrl",controllerAs:"banner"}).controller("bannerCtrl",["$scope",function(){this.tags=["Front-End Developer","Designer","Programmer","Web Programmer"]}]).directive("tagContent",["$timeout",function(t){return{template:'<span ng-bind="tagName"></span>',scope:{tags:"="},replace:!0,link:function(n,e,o,a){function i(){r()}function r(){n.tagName=n.tagName.slice(0,-1),n.tagName.length?t(r,50,!0):t(function(){l(c())},100,!0)}function l(e){n.tagName=e.substring(0,n.tagName.length+1),n.tagName.length!=e.length?t(function(){l(e)},100,!0):t(i,5e3,!0)}function c(){return n.tags[Math.floor(Math.random()*n.tags.length)]}n.tagName=n.tags[0],t(r,1e3,!0)}}}])}(),function(){"use strict";function t(t,n,e,o,a,i,r,l,c){var s=this;s.common={aid:i.aid,url:r.$$absUrl},s.common.aid||e.go("home"),o.getFrontArticle({id:s.common.aid}).then(function(t){s.article=a,c.prerenderReady=!0})}angular.module("sf_blog.article").controller("ArticleCtrl",t),t.$inject=["$rootScope","$scope","$state","Blog","actical","$stateParams","$location","$timeout","$window"]}(),function(){"use strict";angular.module("sf_blog.resources",["ngResource"])}(),function(){"use strict";angular.module("sf_blog.resources").factory("Tags",["$resource","ServerUrl",function(t,n){var e=t(n+"/tags/:id/:controller",{id:"@_id"},{getFrontTagList:{method:"GET",params:{id:"getFrontTagList"}}});return{getFrontTagList:function(t){var n=t||angular.noop;return e.getFrontTagList(function(t){return n(t)},function(t){return n(t)}).$promise}}}])}(),function(){"use strict";angular.module("sf_blog.resources").factory("Blog",["$resource","ServerUrl",function(t,n){var e=t(n+"/article/:id/:controller",{id:"@_id"},{getFrontBlogList:{method:"GET",params:{id:"getFrontArticleList"}},getFrontBlogCount:{method:"GET",params:{id:"getFrontArticleCount"}},getFrontArticle:{method:"GET",params:{controller:"getFrontArticle"}},getIndexImage:{method:"GET",params:{id:"getIndexImage"}},toggleLike:{method:"PUT",params:{controller:"toggleLike"}},getPrenext:{method:"GET",params:{controller:"getPrenext"}}});return{getFrontBlogList:function(t,n){var o=n||angular.noop;return e.getFrontBlogList(t,function(t){return o(t)},function(t){return o(t)}).$promise},getFrontBlogCount:function(t,n){var o=n||angular.noop;return e.getFrontBlogCount(t,function(t){return o(t)},function(t){return o(t)}).$promise},getFrontArticle:function(t,n){var o=n||angular.noop;return e.getFrontArticle(t,function(t){return o(t)},function(t){return o(t)}).$promise},getIndexImage:function(t){var n=t||angular.noop;return e.getIndexImage(function(t){return n(t)},function(t){return n(t)}).$promise},toggleLike:function(t,n){var o=n||angular.noop;return e.toggleLike(t,{},function(t){return o(t)},function(t){return o(t)}).$promise},getPrenext:function(t,n){var o=n||angular.noop;return e.getPrenext(t,function(t){return o(t)},function(t){return o(t)}).$promise}}}])}(),function(){"use strict";angular.module("sf_blog.directive",[])}(),function(){"use strict";angular.module("sf_blog.directive").directive("lazyContainer",[function(){function t(t){var e=t.data("__uid");return e||t.data("__uid",e=""+ ++n),e}var n=0;return{restrict:"EA",controller:["$scope","$element",function(n,e){function o(){var n=angular.element(this),e=t(n);n.css("opacity",1),r.hasOwnProperty(e)&&delete r[e]}function a(t){var n,o,a=e[0].getBoundingClientRect(),i=t[0].getBoundingClientRect(),r=50;return i.bottom+r>=a.top&&i.top-r<=a.bottom&&(o=!0),i.right+r>=a.left&&i.left-r<=a.right&&(n=!0),n&&o}function i(){Object.keys(r).forEach(function(t){var n=r[t],e=n.iElement,o=n.iScope;a(e)&&e.attr("src",o.lazySrc)})}var r={};this.addImg=function(n,e,i){e.bind("load",o),n.$watch("lazySrc",function(){var o="1s";if(null!=n.animateSpeed&&(o=n.animateSpeed),a(e))n.animateVisible&&e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity "+o,transition:"opacity "+o}),e.attr("src",n.lazySrc);else{var i=t(e);e.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity "+o,transition:"opacity "+o}),r[i]={iElement:e,iScope:n}}}),n.$on("$destroy",function(){e.unbind("load");var n=t(e);r.hasOwnProperty(n)&&delete r[n]})},e.bind("scroll",i),e.bind("resize",i)}]}}]).directive("lazySrc",[function(){return{restrict:"A",require:"^lazyContainer",scope:{lazySrc:"@",animateVisible:"@",animateSpeed:"@"},link:function(t,n,e,o){o.addImg(t,n,e)}}}])}(),function(){"use strict";angular.module("sf_blog").directive("highlight",[function(){return{replace:!1,scope:{ngModel:"="},link:function(t,n,e){t.$watch("ngModel",function(e,o){if(e!==o){n.html(t.ngModel);var a=n[0].querySelectorAll("pre code");angular.forEach(a,function(t){hljs.highlightBlock(t)})}})}}}])}(),function(){"use strict";function t(){return{replace:!1,scope:!0,template:"<comment class='comment' ng-if='showComment' article='artical.common.aid' title='artical.title' url='artical.common.url'></comment>",controller:n}}function n(t,n){function e(){n.showComment=!0}var o=document.getElementsByTagName("head")[0],a=document.createElement("script"),i=o.getElementsByTagName("script"),r=!1;for(var l in i)if("http://static.duoshuo.com/embed.js"==i[l].src){r=!0;break}r||(t.duoshuoQuery={short_name:"sfatty"},n.showComment=!1,a.type="text/javascript",a.src="http://static.duoshuo.com/embed.js",a.onload=a.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(),a.onload=a.onreadystatechange=null)},o.appendChild(a))}angular.module("sf_blog").directive("duoshuoLoad",t),n.$inject=["$window","$scope"]}(),function(){return angular.module("sf_blog").constant("ServerUrl","/api").constant("IsDebug",!1).constant("CookieConfig",{domain:"sf_blog"}).constant("EVENT",{NeedToLoad:"need-to-load"})}(),angular.module("sf_blog").run(["$templateCache",function(t){t.put("app/components/banner/banner.html",'<div class="sf_banner"><h1><span class="logo-tag">&lt;</span><tag-content tags="banner.tags"></tag-content><span class="text-cursor">|</span> <span class="logo-tag">/&gt;</span></h1><h2>Simplefatty</h2></div>'),t.put("app/components/article/article.html",'<div class="sf_artical_content clearfix" data-ng-class="{\'loadding\':!artical.article.content}"><div class="loader orbit"><div></div><div></div><div></div><div></div></div><div class="markdown slide-top" ng-if="artical.common.aid" highlight="" ng-model="artical.article.content"></div><duoshuo-load></duoshuo-load></div>'),t.put("app/components/footer/footer.html",'<div class="sf_footer"><span ng-bind="::footer.info"></span><a href="http://www.miibeian.gov.cn/" target="_blank">粤ICP备16009462号</a></div>'),t.put("app/components/main/main.html",'<sf-banner class="slide-top"></sf-banner><div class="sf_container wrap" lazy-container=""><div class="notfound slide-top" ng-if="blogList.length<1&&!isLoading"><p>暂无该标签内的文章哦</p><ul class="clearfix"><li data-ng-repeat="tag in tagList" ng-click="changeTag(tag._id)" data-ng-bind="::tag.name"></li></ul></div><div class="row slide-top" data-ng-repeat="blog in blogList"><div class="sf_artical_item"><img ui-sref="article({aid:blog._id})" lazy-src="{{blog.image}}" class="img-responsive" animate-visible="true" animate-speed="0.5s" alt="{{::blog.title}}"> <a class="artical_title" ui-sref="article({aid:blog._id})">{{::blog.title}}</a><div class="artical_tag"><ul class="taglist clearfix"><li data-ng-repeat="tag in tagList" ng-click="changeTag(tag._id)" data-ng-bind="::tag.name"></li></ul><div class="tag icon-tag" data-ng-bind="::blog.tagName"></div><div class="time icon-time" data-ng-bind="::blog.publish_time|dataFilter"></div></div><p data-ng-bind="::blog.introduce"></p></div></div><sf-loading class="loading" ng-show="isLoading" load-more=""></sf-loading></div>'),t.put("app/components/loading/loading.html",'<div class="ball"></div><div class="ball"></div><div class="ball"></div>'),t.put("app/components/navbar/navbar.html",'<div scroll-hidden="" ng-show="state" class="sf_navbar slide-down"><div class="clearfix wrap"><a href="" class="sf_logo"><img src="../assets/images/user_ic.png" alt=""></a><ul class="sf_nav pull-right"><li ui-sref-active="active"><a ui-sref="home">首页</a></li><li>实验室</li></ul></div></div>')}]);